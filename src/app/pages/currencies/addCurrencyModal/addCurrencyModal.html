<div ng-hide="loadingCurrencies" class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" ng-click="$dismiss()" aria-label="Close">
            <em class="ion-ios-close-empty sn-link-close"></em>
        </button>
        <h4 class="modal-title" id="myModalLabel">Add currency</h4>
    </div>
    <div class="modal-body">
        <div ng-hide="showCustomCurrency">
            <div class="divider">
                <p>&nbsp;
                    <a ng-click="toggleCustomCurrencyView()" class="pointer pull-right">Add custom currency</a>
                </p>
            </div>

            <div class="form-group custom-form">
                <label>Currencies <span class="required-icon">*</span>
                    <small class="text-muted">(Hold CTRL to select multiple currencies)</small>
                </label>
                <br>
                <select class="form-control pointer divider currencies-setup-dropdown" ng-model="currenciesToAdd" multiple
                        ng-options="currency.code + ' - ' + currency.description for currency in initialCurrencies | orderBy: 'code'"
                        required>
                </select>
            </div>
            <p>Currencies selected:
                <span ng-repeat="currency in currenciesToAdd | orderBy: 'code'">
                    {{$last ? ' ' + currency.code : currency.code + ',' }}
                </span>
            </p>
        </div>
        <div ng-show="showCustomCurrency">
            <form name="customCurrencyForm" class="custom-form" novalidate>
                <div class="row form-group divider-20">
                    <div class="col-sm-12 no-padding">
                        <label>Code <span class="required-icon">*</span></label>
                        <input type="text" ng-model="newCurrencyParams.code" class="form-control" placeholder="e.g. USD" auto-focus="!newCurrencyParams.code" required>
                    </div>
                </div>
                <div class="row form-group divider-20">
                    <div class="col-sm-12 no-padding">
                        <label>Description <span class="required-icon">*</span></label>
                        <input type="text" ng-model="newCurrencyParams.description" class="form-control" placeholder="e.g. United States dollar" required>
                    </div>
                </div>
                <div class="row form-group divider-20">
                    <div class="col-sm-12 no-padding">
                        <label>Symbol <span class="required-icon">*</span></label>
                        <input type="text" ng-model="newCurrencyParams.symbol" class="form-control" placeholder="e.g. $" required>
                    </div>
                </div>
                <div class="row form-group divider-20">
                    <div class="col-sm-12 no-padding">
                        <label>Unit <span class="required-icon">*</span></label>
                        <input type="text" ng-model="newCurrencyParams.unit" class="form-control" placeholder="e.g. dollar" required>
                    </div>
                </div>
                <div class="row form-group divider-20">
                    <div class="col-sm-12 no-padding">
                        <label>Divisibility <span class="required-icon">*</span></label>
                        <input type="number" ng-model="newCurrencyParams.divisibility" class="form-control" placeholder="e.g. 2" required>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <button ng-hide="showCustomCurrency" ng-click="addCompanyCurrency(currenciesToAdd)" ng-disabled="currenciesToAdd.length == 0"
                class="btn btn-primary pull-right dashboard-btn">Add
        </button>
        <button ng-show="showCustomCurrency" ng-disabled="!customCurrencyForm.$valid" ng-click="addCustomCompanyCurrency(newCurrencyParams)"
                class="btn btn-primary pull-right dashboard-btn">Add
        </button>
        <button ng-show="showCustomCurrency" class="btn btn-primary pull-right dashboard-btn margin-right-10"
                ng-click="toggleCustomCurrencyView()">Back
        </button>
    </div>
</div>
<div ba-panel ng-show="loadingCurrencies">
    <loading-image></loading-image>
</div>